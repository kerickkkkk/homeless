{"version":3,"sources":["webpack:///./src/views/dashboard/Orders.vue","webpack:///./src/components/dashboard/OrdersModal.vue","webpack:///./src/components/dashboard/OrdersModal.vue?eb4c","webpack:///./src/views/dashboard/Orders.vue?9097"],"names":["class","width","role","aria-label","colspan","orders","length","order","key","id","$filters","date","create_at","user","email","products","product","title","price","qty","final_total","currency","total","checked","is_paid","type","changePayment","for","modalHandler","pagination","getOrders","ref","tabindex","closeModal","tempOrder","name","tel","address","paid_date","unit","deleteOrder","data","modal","delete","edit","currentPage","mounted","this","$refs","adminDeleteOrderModal","adminEditOrdersModal","methods","clearStatus","openModal","show","current_page","hide","$emitter","emit","url","$http","then","res","success","$swal","message","$emit","catch","error","put","__exports__","components","Pagination","OrdersModal","category","has_next","has_pre","total_pages","created","page","get","index","findIndex","render"],"mappings":"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","file":"js/chunk-2d20e872.e637e3ae.js","sourcesContent":["<template>\r\n  <div class=\"container my-3\">\r\n    <table class=\"table mb-3\">\r\n      <thead>\r\n        <tr>\r\n          <th width=\"100\">\r\n            購買時間\r\n          </th>\r\n          <th width=\"100\">\r\n            Email\r\n          </th>\r\n          <th>\r\n            購買款項\r\n          </th>\r\n          <th width=\"100\">\r\n            應付金額\r\n          </th>\r\n          <th width=\"150\">\r\n            是否付款\r\n          </th>\r\n          <th width=\"120\">\r\n            編輯\r\n          </th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <template v-if=\"orders.length > 0\">\r\n          <tr\r\n            v-for=\"order in orders\"\r\n            :key=\"order.id\"\r\n          >\r\n            <td>{{ $filters.date(order.create_at) }}</td>\r\n            <td>\r\n              {{ order?.user.email }}\r\n            </td>\r\n            <td>\r\n              <ul>\r\n                <li\r\n                  v-for=\"product in order.products\"\r\n                  :key=\"product.id\"\r\n                >\r\n                  {{ `${product.product.title}: ${product.product.price} * ${product.qty} = ${product.final_total}` }}\r\n                </li>\r\n              </ul>\r\n            </td>\r\n            <td class=\"text-end\">\r\n              NT {{ $filters.currency(order.total) }}\r\n            </td>\r\n            <td>\r\n              <div class=\"form-check form-switch\">\r\n                <input\r\n                  :id=\"`customSwitch${order.id}`\"\r\n                  :checked=\"order.is_paid\"\r\n                  class=\"form-check-input\"\r\n                  type=\"checkbox\"\r\n                  @change=\"changePayment(order.id ,order)\"\r\n                >\r\n                <label\r\n                  class=\"form-check-label\"\r\n                  :class=\"{'text-success': order.is_paid }\"\r\n                  :for=\"`customSwitch${ order.id }`\"\r\n                >{{ order.is_paid ? \"已付款\" : \"未付款\" }}</label>\r\n              </div>\r\n            </td>\r\n            <td>\r\n              <div\r\n                class=\"btn-group btn-group-sm\"\r\n                role=\"group\"\r\n                aria-label=\"Basic example\"\r\n              >\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn btn-outline-primary\"\r\n                  @click=\"modalHandler('edit', order.id ,{...order})\"\r\n                >\r\n                  檢視\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn btn-outline-danger\"\r\n                  @click=\"modalHandler('delete', order.id)\"\r\n                >\r\n                  刪除\r\n                </button>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </template>\r\n        <tr v-else>\r\n          <td\r\n            class=\"text-center\"\r\n            colspan=\"100\"\r\n          >\r\n            目前沒有訂單唷!!!\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n    <Pagination\r\n      :pagination=\"pagination\"\r\n      @get-items=\"getOrders\"\r\n    />\r\n    <OrdersModal\r\n      ref=\"OrdersModal\"\r\n      @change-payment=\"changePayment\"\r\n      @get-orders=\"getOrders\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Pagination from '@/components/Pagination.vue'\r\nimport OrdersModal from '@/components/dashboard/OrdersModal.vue'\r\n\r\nexport default {\r\n  name: 'Orders',\r\n  components: {\r\n    Pagination,\r\n    OrdersModal\r\n  },\r\n  data () {\r\n    return {\r\n      orders: [],\r\n      pagination: {\r\n        category: null,\r\n        current_page: null,\r\n        has_next: false,\r\n        has_pre: false,\r\n        total_pages: null\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.getOrders()\r\n  },\r\n  methods: {\r\n    getOrders (page = 1) {\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/orders?page=${page}`\r\n      this.$emitter.emit('fullScreenLoading', true)\r\n      this.$http.get(url)\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            const { orders, pagination } = res.data\r\n            this.orders = orders\r\n            this.pagination = pagination\r\n          } else {\r\n            this.$swal(res.data.message, '', 'error')\r\n          }\r\n          this.$emitter.emit('fullScreenLoading', false)\r\n        }).catch((error) => {\r\n          this.$swal(error, '', 'error')\r\n          this.$emitter.emit('fullScreenLoading', false)\r\n        })\r\n    },\r\n    changePayment (id) {\r\n      const index = this.orders.findIndex((product) => product.id === id)\r\n      this.orders[index].is_paid = !this.orders[index].is_paid\r\n\r\n      this.$emitter.emit('fullScreenLoading', true)\r\n      this.$http.put(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/order/${id}`, { data: this.orders[index] })\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.$swal('付款狀態已修改', '', 'success').then(() => {\r\n              this.getOrders()\r\n            })\r\n          } else {\r\n            this.$swal(res.data.message, '', 'error')\r\n          }\r\n          this.$emitter.emit('fullScreenLoading', false)\r\n        }).catch((error) => {\r\n          this.$swal(error, '', 'error')\r\n          this.$emitter.emit('fullScreenLoading', false)\r\n        })\r\n    },\r\n    // modal 控制\r\n    modalHandler (type, id, tempOrder = {}) {\r\n      // 控制往內部送\r\n      this.$refs.OrdersModal.openModal(type, id, tempOrder, this.pagination.current_page)\r\n    }\r\n  }\r\n}\r\n</script>\r\n","<template>\r\n  <div>\r\n    <!-- 檢視 -->\r\n    <div\r\n      ref=\"adminEditOrdersModal\"\r\n      class=\"modal\"\r\n      tabindex=\"-1\"\r\n    >\r\n      <div class=\"modal-dialog modal-xl\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\">\r\n              訂單細節\r\n            </h5>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn-close\"\r\n              aria-label=\"Close\"\r\n              @click=\"closeModal('edit')\"\r\n            />\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <div class=\"row\">\r\n              <div class=\"col-md-4\">\r\n                <h3>使用者資訊</h3>\r\n                <table class=\"table\">\r\n                  <tbody v-if=\"tempOrder.user\">\r\n                    <tr>\r\n                      <th width=\"80\">\r\n                        姓名\r\n                      </th>\r\n                      <td>{{ tempOrder.user.name }}</td>\r\n                    </tr>\r\n                    <tr>\r\n                      <th>Email</th>\r\n                      <td>{{ tempOrder.user.email }}</td>\r\n                    </tr>\r\n                    <tr>\r\n                      <th>電話</th>\r\n                      <td>{{ tempOrder.user.tel }}</td>\r\n                    </tr>\r\n                    <tr>\r\n                      <th>地址</th>\r\n                      <td>{{ tempOrder.user.address }}</td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n              <div class=\"col-md-8\">\r\n                <h3>訂單資訊</h3>\r\n                <table class=\"table\">\r\n                  <tbody v-if=\"tempOrder.user\">\r\n                    <tr>\r\n                      <th>編號</th>\r\n                      <td>{{ tempOrder.id }}</td>\r\n                    </tr>\r\n                    <tr>\r\n                      <th width=\"100\">\r\n                        下單時間\r\n                      </th>\r\n                      <td>{{ $filters.date(tempOrder.create_at) }}</td>\r\n                    </tr>\r\n                    <tr>\r\n                      <th width=\"100\">\r\n                        付款時間\r\n                      </th>\r\n                      <td>\r\n                        <span v-if=\"tempOrder.paid_date\">\r\n                          {{ $filters.date(tempOrder.paid_date) }}\r\n                        </span>\r\n                        <span v-else>\r\n                          時間格式錯誤\r\n                        </span>\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <th>是否付款</th>\r\n                      <td :class=\"[tempOrder.is_paid ? 'text-success': 'text-danger']\">\r\n                        {{ tempOrder.is_paid ? '已付款' : '未付款' }}\r\n                      </td>\r\n                    </tr>\r\n                    <tr>\r\n                      <th>\r\n                        總價\r\n                      </th>\r\n                      <td>\r\n                        {{ `NT ${$filters.currency(tempOrder.total)}` }}\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n                <h3>訂購的商品</h3>\r\n                <table class=\"table\">\r\n                  <tbody v-if=\"tempOrder.products\">\r\n                    <tr\r\n                      v-for=\"product in tempOrder.products\"\r\n                      :key=\"product.id\"\r\n                    >\r\n                      <th>\r\n                        {{ product.product.title }}\r\n                      </th>\r\n                      <td width=\"100\">\r\n                        {{ `${product.qty} / ${product.product.unit}` }}\r\n                      </td>\r\n                      <td\r\n                        width=\"100\"\r\n                        class=\"text-end\"\r\n                      >\r\n                        {{ `NT ${$filters.currency(product.final_total)}` }}\r\n                      </td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n                <div class=\"d-flex justify-content-end\">\r\n                  <div class=\"form-check\">\r\n                    <input\r\n                      id=\"payChecked\"\r\n                      v-model=\"tempOrder.is_paid\"\r\n                      class=\"form-check-input\"\r\n                      type=\"checkbox\"\r\n                    >\r\n                    <label\r\n                      class=\"form-check-label\"\r\n                      for=\"payChecked\"\r\n                    >\r\n                      {{ tempOrder.is_paid ? '已付款' : '未付款' }}\r\n                    </label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-primary\"\r\n              @click=\"changePayment(id)\"\r\n            >\r\n              修改付款狀態並關閉\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-outline-secondary\"\r\n              @click=\"closeModal('edit')\"\r\n            >\r\n              取消\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 刪除 -->\r\n    <div\r\n      ref=\"adminDeleteOrderModal\"\r\n      class=\"modal\"\r\n      tabindex=\"-1\"\r\n    >\r\n      <div class=\"modal-dialog\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\">\r\n              刪除訂單\r\n            </h5>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn-close\"\r\n              aria-label=\"Close\"\r\n              @click=\"closeModal('delete')\"\r\n            />\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <p class=\"h3\">\r\n              是否要<span class=\"text-danger\">刪除</span>??\r\n            </p>\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-danger\"\r\n              @click=\"deleteOrder(id)\"\r\n            >\r\n              確定刪除\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-outline-secondary\"\r\n              @click=\"closeModal('delete')\"\r\n            >\r\n              取消\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport Modal from 'bootstrap/js/dist/modal'\r\nexport default {\r\n  data () {\r\n    return {\r\n      modal: {\r\n        delete: null,\r\n        edit: null\r\n      },\r\n      tempOrder: {},\r\n      id: null,\r\n      currentPage: 1\r\n    }\r\n  },\r\n  mounted () {\r\n    this.modal.delete = new Modal(this.$refs.adminDeleteOrderModal)\r\n    this.modal.edit = new Modal(this.$refs.adminEditOrdersModal)\r\n  },\r\n  methods: {\r\n    clearStatus () {\r\n      this.tempOrder = {}\r\n      this.id = null\r\n    },\r\n    openModal (type = 'delete', id, tempOrder, currentPage) {\r\n      if (type === 'edit') {\r\n        this.tempOrder = tempOrder\r\n      }\r\n      this.modal[type].show()\r\n      this.id = id\r\n      // 紀錄父層當下頁面 避免更新後跳回第一頁\r\n      this.current_page = currentPage\r\n    },\r\n    closeModal (type) {\r\n      this.modal[type].hide()\r\n      this.clearStatus()\r\n    },\r\n    deleteOrder (id) {\r\n      this.$emitter.emit('fullScreenLoading', true)\r\n      const url = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/order/${id}`\r\n      this.$http.delete(url)\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            this.closeModal('delete')\r\n            this.$swal(res.data.message, '', 'success').then(() => {\r\n              this.$emit('get-orders', this.current_page)\r\n            })\r\n            this.clearStatus()\r\n          } else {\r\n            this.$swal(res.data.message, '', 'error')\r\n          }\r\n          this.$emitter.emit('fullScreenLoading', false)\r\n        }).catch((error) => {\r\n          this.$swal(error, '', 'error')\r\n          this.$emitter.emit('fullScreenLoading', false)\r\n        })\r\n    },\r\n    changePayment (id) {\r\n      this.$emitter.emit('fullScreenLoading', true)\r\n      this.$http.put(`${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/order/${id}`, { data: this.tempOrder })\r\n        .then((res) => {\r\n          if (res.data.success) {\r\n            // 回來就要關掉 modal 資料狀態也可以清掉 不然 bs 會找不到\r\n            this.closeModal('edit')\r\n            this.$swal('付款狀態已修改', '', 'success').then(() => {\r\n              this.$emit('get-orders', this.current_page)\r\n            })\r\n          } else {\r\n            this.$swal(res.data.message, '', 'error')\r\n          }\r\n          this.$emitter.emit('fullScreenLoading', false)\r\n        }).catch((error) => {\r\n          this.$swal(error, '', 'error')\r\n          this.$emitter.emit('fullScreenLoading', false)\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./OrdersModal.vue?vue&type=template&id=aba32a6e\"\nimport script from \"./OrdersModal.vue?vue&type=script&lang=js\"\nexport * from \"./OrdersModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\code_practice\\\\homeless\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Orders.vue?vue&type=template&id=b22f531e\"\nimport script from \"./Orders.vue?vue&type=script&lang=js\"\nexport * from \"./Orders.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\code_practice\\\\homeless\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}
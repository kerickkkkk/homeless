(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e73d14dc"],{"07ac":function(e,t,c){var r=c("23e7"),o=c("6f53").values;r({target:"Object",stat:!0},{values:function(e){return o(e)}})},"1dde":function(e,t,c){var r=c("d039"),o=c("b622"),a=c("2d00"),n=o("species");e.exports=function(e){return a>=51||!r((function(){var t=[],c=t.constructor={};return c[n]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},2532:function(e,t,c){"use strict";var r=c("23e7"),o=c("5a34"),a=c("1d80"),n=c("ab13");r({target:"String",proto:!0,forced:!n("includes")},{includes:function(e){return!!~String(a(this)).indexOf(o(e),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(e,t,c){var r=c("861d"),o=c("c6b6"),a=c("b622"),n=a("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[n])?!!t:"RegExp"==o(e))}},"5a34":function(e,t,c){var r=c("44e7");e.exports=function(e){if(r(e))throw TypeError("The method doesn't accept regular expressions");return e}},"6f53":function(e,t,c){var r=c("83ab"),o=c("df75"),a=c("fc6a"),n=c("d1e7").f,l=function(e){return function(t){var c,l=a(t),d=o(l),i=d.length,s=0,u=[];while(i>s)c=d[s++],r&&!n.call(l,c)||u.push(e?[c,l[c]]:l[c]);return u}};e.exports={entries:l(!0),values:l(!1)}},8418:function(e,t,c){"use strict";var r=c("c04e"),o=c("9bf2"),a=c("5c6c");e.exports=function(e,t,c){var n=r(t);n in e?o.f(e,n,a(0,c)):e[n]=c}},"94ee":function(e,t,c){"use strict";var r=c("7a23"),o={class:"row justify-content-center list-unstyled py-5 px-3"},a={class:"col-md-4"},n={class:"col-md-4"},l={class:"col-md-4"};function d(e,t,c,d,i,s){return Object(r["openBlock"])(),Object(r["createBlock"])("ul",o,[Object(r["createVNode"])("li",a,[Object(r["createVNode"])("div",{class:[["checkout"===c.step?"text-primary":"text-muted"],"bg-primary p-3 badge rounded-pill fs-3 w-100 mb-2 bg-light"]}," 1. 填寫訂單 ",2)]),Object(r["createVNode"])("li",n,[Object(r["createVNode"])("div",{class:[["payment"===c.step?"text-primary":"text-muted"],"p-3 badge rounded-pill fs-3 w-100 mb-2 bg-light"]}," 2. 訂單結帳 ",2)]),Object(r["createVNode"])("li",l,[Object(r["createVNode"])("div",{class:[["paid"===c.step?"text-primary":"text-muted"],"p-3 badge rounded-pill fs-3 w-100 mb-2 bg-light"]}," 3. 付款完成 ",2)])])}var i={props:{step:{type:String,default:""}}},s=c("d959"),u=c.n(s);const b=u()(i,[["render",d]]);t["a"]=b},"99af":function(e,t,c){"use strict";var r=c("23e7"),o=c("d039"),a=c("e8b5"),n=c("861d"),l=c("7b0b"),d=c("50c4"),i=c("8418"),s=c("65f0"),u=c("1dde"),b=c("b622"),O=c("2d00"),p=b("isConcatSpreadable"),j=9007199254740991,N="Maximum allowed index exceeded",V=O>=51||!o((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),f=u("concat"),h=function(e){if(!n(e))return!1;var t=e[p];return void 0!==t?!!t:a(e)},g=!V||!f;r({target:"Array",proto:!0,forced:g},{concat:function(e){var t,c,r,o,a,n=l(this),u=s(n,0),b=0;for(t=-1,r=arguments.length;t<r;t++)if(a=-1===t?n:arguments[t],h(a)){if(o=d(a.length),b+o>j)throw TypeError(N);for(c=0;c<o;c++,b++)c in a&&i(u,b,a[c])}else{if(b>=j)throw TypeError(N);i(u,b++,a)}return u.length=b,u}})},ab13:function(e,t,c){var r=c("b622"),o=r("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(c){try{return t[o]=!1,"/./"[e](t)}catch(r){}}return!1}},b0c0:function(e,t,c){var r=c("83ab"),o=c("9bf2").f,a=Function.prototype,n=a.toString,l=/^\s*function ([^ (]*)/,d="name";r&&!(d in a)&&o(a,d,{configurable:!0,get:function(){try{return n.call(this).match(l)[1]}catch(e){return""}}})},b275:function(e,t,c){"use strict";c.r(t);c("b0c0"),c("07ac");var r=c("7a23"),o={class:"payment"},a={class:"container"},n={key:0,class:"row align-items-center mb-5 p-4 bg-light"},l={class:"col-md-6 mb-4"},d={class:"text-center"},i=Object(r["createVNode"])("h1",{class:"text-success text-center h1 mb-3"},[Object(r["createVNode"])("i",{class:"bi bi-check-circle-fill"}),Object(r["createTextVNode"])(" 付款成功 ")],-1),s=Object(r["createVNode"])("p",{class:"w-75 mx-auto"}," 感謝您的訂購，為您附上購買明細。如對此次交易有任何問題，請隨時聯絡我們。 ",-1),u={class:"col-md-6"},b={class:"bg-white p-md-5 rounded"},O=Object(r["createVNode"])("h2",{class:"text-center border-bottom pb-3"}," 購買明細 ",-1),p={key:0,class:"table table-border"},j=Object(r["createVNode"])("th",null,"下單時間",-1),N=Object(r["createVNode"])("th",null,"訂購編號",-1),V=Object(r["createVNode"])("th",null,"訂購人",-1),f=Object(r["createVNode"])("th",null,"信箱",-1),h=Object(r["createVNode"])("th",null,"電話",-1),g=Object(r["createVNode"])("th",null,"地址",-1),y=Object(r["createVNode"])("th",null,"商品清單",-1),m={class:"d-flex"},v={class:"ms-auto"},x={class:"mb-0 text-end"},S={class:"mb-0 text-end"},k=Object(r["createVNode"])("th",null,"折價券",-1),$=Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",null,"備註"),Object(r["createVNode"])("td",null,"1")],-1),D=Object(r["createVNode"])("th",null,"付款狀態",-1),w=Object(r["createVNode"])("h2",{class:"text-center mb-3"}," 購物清單 ",-1),B={class:"table text-center table-striped"},_=Object(r["createVNode"])("thead",null,[Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("th",null,"商品名稱"),Object(r["createVNode"])("th",{width:"70"}," 單價 "),Object(r["createVNode"])("th",{width:"70"}," 數量 "),Object(r["createVNode"])("th",{width:"70"}," 小計 ")])],-1),T={class:"text-end"},C={class:"text-end",colspan:"100"},L={class:"text-end",colspan:"100"},I=Object(r["createVNode"])("td",{class:"text-end py-2",colspan:"2"}," 總計 ",-1),q={class:"text-end",colspan:"2"},P=Object(r["createTextVNode"])(" 元 "),E=Object(r["createVNode"])("h2",{class:"text-center mb-3"}," 訂購人資訊 ",-1),F={class:"table text-center table-striped"},A=Object(r["createVNode"])("th",null,"姓名：",-1),J=Object(r["createVNode"])("th",null,"電話：",-1),M=Object(r["createVNode"])("th",null,"住址：",-1),R=Object(r["createVNode"])("th",null,"電子信箱：",-1),z=Object(r["createVNode"])("th",null,"訂購日期：",-1),G=Object(r["createVNode"])("th",null,"付款狀態：",-1),H={class:"text-end my-5"};function K(e,t,c,K,Q,U){var W=Object(r["resolveComponent"])("CheckOutStep");return Object(r["openBlock"])(),Object(r["createBlock"])("div",o,[Object(r["createVNode"])("div",a,[Object(r["createVNode"])(W,{step:Q.order.is_paid?"paid":"payment"},null,8,["step"]),Q.order.is_paid?(Object(r["openBlock"])(),Object(r["createBlock"])("div",n,[Object(r["createVNode"])("div",l,[Object(r["createVNode"])("div",d,[i,s,Object(r["createVNode"])("button",{type:"button",class:"btn btn-primary col-md-3",onClick:t[1]||(t[1]=function(){return U.goShop&&U.goShop.apply(U,arguments)})}," 返回菜單 ")])]),Object(r["createVNode"])("div",u,[Object(r["createVNode"])("div",b,[O,U.orderIsBack?(Object(r["openBlock"])(),Object(r["createBlock"])("table",p,[Object(r["createVNode"])("tbody",null,[Object(r["createVNode"])("tr",null,[j,Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.$filters.date(Q.order.create_at)),1)]),Object(r["createVNode"])("tr",null,[N,Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(Q.order.id),1)]),Object(r["createVNode"])("tr",null,[V,Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(Q.order.user.name),1)]),Object(r["createVNode"])("tr",null,[f,Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(Q.order.user.email),1)]),Object(r["createVNode"])("tr",null,[h,Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(Q.order.user.tel),1)]),Object(r["createVNode"])("tr",null,[g,Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(Q.order.user.address),1)]),Object(r["createVNode"])("tr",null,[y,Object(r["createVNode"])("td",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(Object.values(Q.order.products),(function(t){return Object(r["openBlock"])(),Object(r["createBlock"])("p",{key:t.id,class:"mb-0 border-bottom"},[Object(r["createTextVNode"])(Object(r["toDisplayString"])(t.product.title)+" ",1),Object(r["createVNode"])("span",m,[Object(r["createTextVNode"])(" $"+Object(r["toDisplayString"])(t.product.origin_price)+" x "+Object(r["toDisplayString"])(t.qty)+" "+Object(r["toDisplayString"])(t.product.unit)+" = ",1),Object(r["createVNode"])("span",v,"$"+Object(r["toDisplayString"])(e.$filters.currency(t.product.origin_price*t.qty)),1)])])})),128)),Object(r["createVNode"])("p",x," 折扣： NT$"+Object(r["toDisplayString"])(e.$filters.currency(U.totalOriginPrice-Q.order.total)),1),Object(r["createVNode"])("p",S," 總價： NT$"+Object(r["toDisplayString"])(e.$filters.currency(Q.order.total)),1)])]),Object(r["createVNode"])("tr",null,[k,Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(Object.values(Q.order.products)[0].coupon?"".concat(Object.values(Q.order.products)[0].coupon.percent," 折"):"無"),1)]),$,Object(r["createVNode"])("tr",null,[D,Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(Q.order.is_paid?"已付款":"未付款"),1)])])])):Object(r["createCommentVNode"])("",!0)])])])):(Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],{key:1},[w,Object(r["createVNode"])("table",B,[_,Object(r["createVNode"])("tbody",null,[(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(Q.order.products,(function(t){return Object(r["openBlock"])(),Object(r["createBlock"])("tr",{key:t.id},[Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.product.title),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.$filters.currency(t.product.origin_price)),1),Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(t.qty),1),Object(r["createVNode"])("td",T,Object(r["toDisplayString"])(e.$filters.currency(t.qty*t.product.origin_price)),1)])})),128))]),Object(r["createVNode"])("tfoot",null,[Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("td",C," 原價 $"+Object(r["toDisplayString"])(e.$filters.currency(U.totalOriginPrice)),1)]),Object(r["createVNode"])("tr",null,[Object(r["createVNode"])("td",L," 折扣 $"+Object(r["toDisplayString"])(e.$filters.currency(U.totalOriginPrice-Q.order.total)),1)]),Object(r["createVNode"])("tr",null,[I,Object(r["createVNode"])("td",q,[Object(r["createVNode"])("span",null,Object(r["toDisplayString"])(Q.order.total),1),P])])])]),E,Object(r["createVNode"])("table",F,[Object(r["createVNode"])("tbody",null,[Object(r["createVNode"])("tr",null,[A,Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(Q.order.user.name),1)]),Object(r["createVNode"])("tr",null,[J,Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(Q.order.user.tel),1)]),Object(r["createVNode"])("tr",null,[M,Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(Q.order.user.address),1)]),Object(r["createVNode"])("tr",null,[R,Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(Q.order.user.email),1)]),Object(r["createVNode"])("tr",null,[z,Object(r["createVNode"])("td",null,Object(r["toDisplayString"])(e.$filters.date(Q.order.create_at)),1)]),Object(r["createVNode"])("tr",null,[G,Object(r["createVNode"])("td",{class:[Q.order.is_paid?"text-success":"text-danger"]},Object(r["toDisplayString"])(Q.order.is_paid?"已":" 未")+"付款 ",3)])])]),Object(r["createVNode"])("div",H,[Q.order.is_paid?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])("button",{key:0,type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=function(e){return U.pay(Q.orderId)})}," 確認付款去 "))])],64))])])}c("caad"),c("2532"),c("b64b"),c("99af");var Q=c("94ee"),U={name:"Payment",components:{CheckOutStep:Q["a"]},data:function(){return{orderId:null,order:{user:{}}}},computed:{orderIsBack:function(){return Object.keys(this.order).includes("id")},totalOriginPrice:function(){if(this.orderIsBack){var e=Object.values(this.order.products).reduce((function(e,t){return e+=t.product.origin_price*t.qty,e}),0);return e||0}return 0}},created:function(){this.orderId=this.$route.params.id,this.getOrder(this.$route.params.id)},methods:{getOrder:function(e){var t=this;this.$emitter.emit("fullScreenLoading",!0),this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("pet","/order/").concat(e)).then((function(e){if(e.data.success){var c=e.data.order;t.order=c}else t.$swal(e.data.message,"","error");t.$emitter.emit("fullScreenLoading",!1)})).catch((function(e){t.$swal(e,"","error"),t.$emitter.emit("fullScreenLoading",!1)}))},pay:function(e){var t=this;this.$emitter.emit("fullScreenLoading",!0),this.$http.post("".concat("https://vue3-course-api.hexschool.io","/api/").concat("pet","/pay/").concat(e)).then((function(c){if(c.data.success){var r=c.data.message;t.$swal("".concat(r,"!! \n"),"","success"),t.getOrder(e)}else t.$swal(c.data.message,"","error");t.$emitter.emit("fullScreenLoading",!1)})).catch((function(e){t.$swal(e,"","error"),t.$emitter.emit("fullScreenLoading",!1)}))},goShop:function(){this.$router.push("/products")}}},W=c("d959"),X=c.n(W);const Y=X()(U,[["render",K]]);t["default"]=Y},caad:function(e,t,c){"use strict";var r=c("23e7"),o=c("4d64").includes,a=c("44d2");r({target:"Array",proto:!0},{includes:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a("includes")}}]);
//# sourceMappingURL=chunk-e73d14dc.6315a4c1.js.map